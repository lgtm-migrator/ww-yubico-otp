{"version":3,"sources":["yotp-login.js"],"names":["window","addEventListener","yotpCallback","e","preventDefault","form","removeEventListener","username","$","value","req","XMLHttpRequest","this","response","status","input","removeAttribute","container","focus","submit","open","yotpSettings","ajaxurl","responseType","setRequestHeader","send","encodeURIComponent","document","getElementById","bind","setAttribute"],"mappings":"AACAA,OAAOC,iBAAiB,mBAAoB,WAW3C,SAASC,EAAaC,GAErBA,EAAEC,iBACFC,EAAKC,oBAAoB,SAAUJ,GAEnC,IAAIK,EAAWC,EAAE,cAAcC,MAC/B,IAAKF,EACJ,OAAO,EAGR,IAAIG,EAAM,IAAIC,eAgBd,OAfAD,EAAIT,iBAAiB,OAAQ,WACxB,OAASW,KAAKC,UAA4B,MAAhBD,KAAKE,QAAmBF,KAAKC,SAASC,QAKpEC,EAAMC,gBAAgB,YACtBC,EAAUD,gBAAgB,UAC1BD,EAAMG,SANLb,EAAKc,WASPT,EAAIU,KAAK,OAAQC,aAAaC,SAC9BZ,EAAIa,aAAe,OACnBb,EAAIc,iBAAiB,eAAgB,qCACrCd,EAAIe,KAAK,uBAAyBC,mBAAmBnB,KAC9C,EApCR,IAAIC,EAAYmB,SAASC,eAAeC,KAAKF,UACzCtB,EAAYG,EAAE,aACdS,EAAYT,EAAE,cACdO,EAAYP,EAAE,QAElBH,EAAKJ,iBAAiB,SAAUC,GAChCe,EAAUa,aAAa,SAAU,IACjCf,EAAMe,aAAa,WAAY,IAC/Bf,EAAMe,aAAa,WAAY","file":"yotp-login.min.js","sourcesContent":["/** global: yotpSettings */\nwindow.addEventListener('DOMContentLoaded', function() {\n\tvar $         = document.getElementById.bind(document);\n\tvar form      = $('loginform');\n\tvar container = $('yotp-block');\n\tvar input     = $('yotp');\n\n\tform.addEventListener('submit', yotpCallback);\n\tcontainer.setAttribute('hidden', '');\n\tinput.setAttribute('disabled', '');\n\tinput.setAttribute('required', '');\n\n\tfunction yotpCallback(e)\n\t{\n\t\te.preventDefault();\n\t\tform.removeEventListener('submit', yotpCallback);\n\n\t\tvar username = $('user_login').value;\n\t\tif (!username) {\n\t\t\treturn true;\n\t\t}\n\n\t\tvar req = new XMLHttpRequest();\n\t\treq.addEventListener('load', function() {\n\t\t\tif (null === this.response || this.status !== 200 || !this.response.status) {\n\t\t\t\tform.submit();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tinput.removeAttribute('disabled');\n\t\t\tcontainer.removeAttribute('hidden');\n\t\t\tinput.focus();\n\t\t});\n\n\t\treq.open('POST', yotpSettings.ajaxurl);\n\t\treq.responseType = 'json';\n\t\treq.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n\t\treq.send('action=yotp-check&l=' + encodeURIComponent(username));\n\t\treturn false;\n\t}\n});\n"]}