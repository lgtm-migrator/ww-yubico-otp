{"version":3,"sources":["yotp-login.js"],"names":["window","addEventListener","$","document","getElementById","bind","submit","container","input","yotpCallback","e","preventDefault","stopPropagation","stopImmediatePropagation","username","value","removeEventListener","req","XMLHttpRequest","this","response","status","removeAttribute","focus","click","open","yotpSettings","ajaxurl","responseType","setRequestHeader","send","encodeURIComponent","setAttribute"],"mappings":"AACAA,OAAOC,iBAAiB,mBAAoB,WAC3C,IAAIC,EAAYC,SAASC,eAAeC,KAAKF,UACzCG,EAAYJ,EAAE,aACdK,EAAYL,EAAE,cACdM,EAAYN,EAAE,QAElBI,EAAOL,iBAAiB,QAKxB,SAASQ,EAAaC,GAErBA,EAAEC,iBACFD,EAAEE,kBACFF,EAAEG,2BAEF,IAAIC,EAAWZ,EAAE,cAAca,MAC/B,IAAKD,EACJ,OAGDR,EAAOU,oBAAoB,QAASP,GAEpC,IAAIQ,EAAM,IAAIC,eACdD,EAAIhB,iBAAiB,OAAQ,WACxB,OAASkB,KAAKC,UAA4B,MAAhBD,KAAKE,QAAmBF,KAAKC,SAASC,QAKpEb,EAAMc,gBAAgB,YACtBf,EAAUe,gBAAgB,UAC1Bd,EAAMe,SANLjB,EAAOkB,UASTP,EAAIQ,KAAK,OAAQC,aAAaC,SAC9BV,EAAIW,aAAe,OACnBX,EAAIY,iBAAiB,eAAgB,qCACrCZ,EAAIa,KAAK,uBAAyBC,mBAAmBjB,IACrD,OAAO,IAjCRP,EAAUyB,aAAa,SAAU,IACjCxB,EAAMwB,aAAa,WAAY,IAC/BxB,EAAMwB,aAAa,WAAY","file":"yotp-login.min.js","sourcesContent":["/** global: yotpSettings */\nwindow.addEventListener('DOMContentLoaded', function() {\n\tvar $         = document.getElementById.bind(document);\n\tvar submit    = $('wp-submit');\n\tvar container = $('yotp-block');\n\tvar input     = $('yotp');\n\n\tsubmit.addEventListener('click', yotpCallback);\n\tcontainer.setAttribute('hidden', '');\n\tinput.setAttribute('disabled', '');\n\tinput.setAttribute('required', '');\n\n\tfunction yotpCallback(e)\n\t{\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\te.stopImmediatePropagation();\n\n\t\tvar username = $('user_login').value;\n\t\tif (!username) {\n\t\t\treturn;\n\t\t}\n\n\t\tsubmit.removeEventListener('click', yotpCallback);\n\n\t\tvar req = new XMLHttpRequest();\n\t\treq.addEventListener('load', function() {\n\t\t\tif (null === this.response || this.status !== 200 || !this.response.status) {\n\t\t\t\tsubmit.click();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tinput.removeAttribute('disabled');\n\t\t\tcontainer.removeAttribute('hidden');\n\t\t\tinput.focus();\n\t\t});\n\n\t\treq.open('POST', yotpSettings.ajaxurl);\n\t\treq.responseType = 'json';\n\t\treq.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n\t\treq.send('action=yotp-check&l=' + encodeURIComponent(username));\n\t\treturn false;\n\t}\n});\n"]}